<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Force Visible Content Test</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h3>Force Visible Content Test</h3>
        
        <div class="alert alert-info">
            <strong>Issue:</strong> "content kh√¥ng hi·ªán, console kh√¥ng b√°o l·ªói, c√≥ thay ƒë·ªïi url"
            <br><strong>Solution:</strong> Force content to be visible with !important styles
        </div>

        <!-- Tab Navigation -->
        <ul class="nav nav-tabs mb-4">
            <li class="nav-item">
                <button class="btn btn-outline-primary tab-btn active" data-tab="tab1" onclick="forceShowContent('tab1')">
                    Tab 1 - Force Red
                </button>
            </li>
            <li class="nav-item">
                <button class="btn btn-outline-primary tab-btn ml-2" data-tab="tab2" onclick="forceShowContent('tab2')">
                    Tab 2 - Force Blue
                </button>
            </li>
            <li class="nav-item">
                <button class="btn btn-outline-primary tab-btn ml-2" data-tab="tab3" onclick="forceShowContent('tab3')">
                    Tab 3 - Force Green
                </button>
            </li>
        </ul>

        <!-- Multiple content areas to test different approaches -->
        <div class="row">
            <div class="col-md-12 mb-4">
                <h5>Method 1: Direct innerHTML replacement</h5>
                <div id="method1-content" style="border: 3px solid #000 !important; padding: 20px !important; min-height: 150px !important; background: #ffffff !important; display: block !important; visibility: visible !important;">
                    <p><strong>Method 1 Initial Content</strong> - innerHTML replacement</p>
                </div>
            </div>
            
            <div class="col-md-12 mb-4">
                <h5>Method 2: jQuery html() replacement</h5>
                <div id="method2-content" style="border: 3px solid #007bff !important; padding: 20px !important; min-height: 150px !important; background: #f8f9fa !important; display: block !important; visibility: visible !important;">
                    <p><strong>Method 2 Initial Content</strong> - jQuery html()</p>
                </div>
            </div>
            
            <div class="col-md-12 mb-4">
                <h5>Method 3: DOM createElement</h5>
                <div id="method3-content" style="border: 3px solid #28a745 !important; padding: 20px !important; min-height: 150px !important; background: #e9ecef !important; display: block !important; visibility: visible !important;">
                    <p><strong>Method 3 Initial Content</strong> - DOM createElement</p>
                </div>
            </div>
        </div>

        <!-- Force Visible Test Buttons -->
        <div class="card">
            <div class="card-header">Force Visibility Tests</div>
            <div class="card-body">
                <button class="btn btn-danger" onclick="emergencyShowContent()">üö® EMERGENCY SHOW CONTENT</button>
                <button class="btn btn-warning" onclick="injectForceStyles()">üíâ INJECT FORCE STYLES</button>
                <button class="btn btn-info" onclick="testAllMethods()">üîß TEST ALL METHODS</button>
                <button class="btn btn-success" onclick="checkElementVisibility()">üëÅÔ∏è CHECK VISIBILITY</button>
                <a href="?tab=tab2" class="btn btn-primary">üîó URL Test ?tab=tab2</a>
            </div>
        </div>

        <!-- Debug Status -->
        <div class="mt-3">
            <div class="card">
                <div class="card-header">Real-time Status</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <p><strong>Current Tab:</strong> <span id="status-tab" class="badge badge-primary">tab1</span></p>
                            <p><strong>URL Parameter:</strong> <span id="status-url" class="badge badge-info">none</span></p>
                        </div>
                        <div class="col-md-4">
                            <p><strong>Method 1 Visible:</strong> <span id="status-method1" class="badge badge-secondary">unknown</span></p>
                            <p><strong>Method 2 Visible:</strong> <span id="status-method2" class="badge badge-secondary">unknown</span></p>
                        </div>
                        <div class="col-md-4">
                            <p><strong>Method 3 Visible:</strong> <span id="status-method3" class="badge badge-secondary">unknown</span></p>
                            <p><strong>Force Styles:</strong> <span id="status-styles" class="badge badge-secondary">not injected</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style id="base-styles">
        .tab-btn.active {
            background-color: #007bff !important;
            color: white !important;
            border-color: #007bff !important;
        }
        
        /* Force visibility styles */
        .force-visible {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 1000 !important;
            background: #ffffff !important;
            border: 3px solid #dc3545 !important;
        }
    </style>

    <script>
        let currentTab = 'tab1';
        let methodsWorking = {
            method1: false,
            method2: false,
            method3: false
        };

        // Content templates with different colors
        const contentTemplates = {
            tab1: {
                color: '#ffebee',
                border: '#f44336',
                title: 'üî¥ TAB 1 - RED CONTENT',
                text: 'This is RED content - if you see this, Method works!'
            },
            tab2: {
                color: '#e3f2fd',
                border: '#2196f3',
                title: 'üîµ TAB 2 - BLUE CONTENT',
                text: 'This is BLUE content - if you see this, Method works!'
            },
            tab3: {
                color: '#e8f5e8',
                border: '#4caf50',
                title: 'üü¢ TAB 3 - GREEN CONTENT',
                text: 'This is GREEN content - if you see this, Method works!'
            }
        };

        function forceShowContent(tabName) {
            console.log(`=== FORCE SHOWING CONTENT: ${tabName} ===`);
            currentTab = tabName;
            
            // Update button states
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // Try all 3 methods
            method1Replace(tabName);
            method2jQuery(tabName);
            method3CreateElement(tabName);
            
            // Update URL
            updateURL(tabName);
            
            // Update status
            updateStatus();
            
            console.log(`‚úÖ Force show completed for: ${tabName}`);
        }

        function method1Replace(tabName) {
            try {
                const element = document.getElementById('method1-content');
                const template = contentTemplates[tabName];
                
                const newHTML = `
                    <div style="background: ${template.color} !important; border: 3px solid ${template.border} !important; padding: 20px !important; border-radius: 8px !important;">
                        <h4 style="color: ${template.border} !important;">${template.title}</h4>
                        <div class="alert alert-success">
                            <strong>METHOD 1 SUCCESS!</strong> ${template.text}
                        </div>
                        <p><strong>Time:</strong> ${new Date().toLocaleTimeString()}</p>
                        <p><strong>Method:</strong> element.innerHTML replacement</p>
                    </div>
                `;
                
                element.innerHTML = newHTML;
                
                // Force styles
                element.style.display = 'block';
                element.style.visibility = 'visible';
                element.style.opacity = '1';
                
                methodsWorking.method1 = true;
                console.log('‚úÖ Method 1 (innerHTML) - SUCCESS');
                
            } catch (error) {
                console.error('‚ùå Method 1 (innerHTML) - ERROR:', error);
                methodsWorking.method1 = false;
            }
        }

        function method2jQuery(tabName) {
            try {
                if (typeof $ === 'undefined') {
                    console.error('‚ùå Method 2 - jQuery not available');
                    return;
                }
                
                const template = contentTemplates[tabName];
                
                const newHTML = `
                    <div style="background: ${template.color} !important; border: 3px solid ${template.border} !important; padding: 20px !important; border-radius: 8px !important;">
                        <h4 style="color: ${template.border} !important;">${template.title}</h4>
                        <div class="alert alert-info">
                            <strong>METHOD 2 SUCCESS!</strong> ${template.text}
                        </div>
                        <p><strong>Time:</strong> ${new Date().toLocaleTimeString()}</p>
                        <p><strong>Method:</strong> jQuery html() replacement</p>
                    </div>
                `;
                
                $('#method2-content').html(newHTML);
                
                // Force styles with jQuery
                $('#method2-content').css({
                    'display': 'block',
                    'visibility': 'visible',
                    'opacity': '1'
                });
                
                methodsWorking.method2 = true;
                console.log('‚úÖ Method 2 (jQuery) - SUCCESS');
                
            } catch (error) {
                console.error('‚ùå Method 2 (jQuery) - ERROR:', error);
                methodsWorking.method2 = false;
            }
        }

        function method3CreateElement(tabName) {
            try {
                const element = document.getElementById('method3-content');
                const template = contentTemplates[tabName];
                
                // Clear existing content
                element.innerHTML = '';
                
                // Create new elements
                const container = document.createElement('div');
                container.style.background = template.color;
                container.style.border = `3px solid ${template.border}`;
                container.style.padding = '20px';
                container.style.borderRadius = '8px';
                
                const title = document.createElement('h4');
                title.style.color = template.border;
                title.textContent = template.title;
                
                const alert = document.createElement('div');
                alert.className = 'alert alert-warning';
                alert.innerHTML = `<strong>METHOD 3 SUCCESS!</strong> ${template.text}`;
                
                const time = document.createElement('p');
                time.innerHTML = `<strong>Time:</strong> ${new Date().toLocaleTimeString()}`;
                
                const method = document.createElement('p');
                method.innerHTML = `<strong>Method:</strong> DOM createElement`;
                
                // Append elements
                container.appendChild(title);
                container.appendChild(alert);
                container.appendChild(time);
                container.appendChild(method);
                element.appendChild(container);
                
                // Force styles
                element.style.display = 'block';
                element.style.visibility = 'visible';
                element.style.opacity = '1';
                
                methodsWorking.method3 = true;
                console.log('‚úÖ Method 3 (createElement) - SUCCESS');
                
            } catch (error) {
                console.error('‚ùå Method 3 (createElement) - ERROR:', error);
                methodsWorking.method3 = false;
            }
        }

        function updateURL(tabName) {
            if (history.pushState) {
                const newURL = window.location.pathname + '?tab=' + tabName;
                history.pushState(null, null, newURL);
                console.log(`‚úÖ URL updated to: ${newURL}`);
            }
        }

        function updateStatus() {
            document.getElementById('status-tab').textContent = currentTab;
            
            const urlParams = new URLSearchParams(window.location.search);
            document.getElementById('status-url').textContent = urlParams.get('tab') || 'none';
            
            document.getElementById('status-method1').textContent = methodsWorking.method1 ? 'YES' : 'NO';
            document.getElementById('status-method1').className = `badge ${methodsWorking.method1 ? 'badge-success' : 'badge-danger'}`;
            
            document.getElementById('status-method2').textContent = methodsWorking.method2 ? 'YES' : 'NO';
            document.getElementById('status-method2').className = `badge ${methodsWorking.method2 ? 'badge-success' : 'badge-danger'}`;
            
            document.getElementById('status-method3').textContent = methodsWorking.method3 ? 'YES' : 'NO';
            document.getElementById('status-method3').className = `badge ${methodsWorking.method3 ? 'badge-success' : 'badge-danger'}`;
        }

        function emergencyShowContent() {
            console.log('üö® EMERGENCY SHOW CONTENT');
            
            // Force show ALL content areas
            const areas = ['method1-content', 'method2-content', 'method3-content'];
            areas.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.style.display = 'block';
                    element.style.visibility = 'visible';
                    element.style.opacity = '1';
                    element.style.position = 'relative';
                    element.style.zIndex = '9999';
                    element.classList.add('force-visible');
                    
                    element.innerHTML = `
                        <div style="background: #fff3cd !important; border: 3px solid #ffc107 !important; padding: 20px !important;">
                            <h3>üö® EMERGENCY CONTENT SHOW</h3>
                            <p><strong>Area:</strong> ${id}</p>
                            <p><strong>Forced visible at:</strong> ${new Date().toLocaleTimeString()}</p>
                            <p><strong>If you see this, the element CAN display content!</strong></p>
                        </div>
                    `;
                }
            });
        }

        function injectForceStyles() {
            const forceCSS = `
                <style id="force-styles">
                    #method1-content, #method2-content, #method3-content {
                        display: block !important;
                        visibility: visible !important;
                        opacity: 1 !important;
                        position: relative !important;
                        z-index: 9999 !important;
                        background: #ffffff !important;
                        border: 3px solid #dc3545 !important;
                        padding: 20px !important;
                        margin: 10px 0 !important;
                        min-height: 100px !important;
                    }
                </style>
            `;
            
            document.head.insertAdjacentHTML('beforeend', forceCSS);
            document.getElementById('status-styles').textContent = 'injected';
            document.getElementById('status-styles').className = 'badge badge-success';
            console.log('üíâ Force styles injected');
        }

        function testAllMethods() {
            console.log('üîß TESTING ALL METHODS');
            forceShowContent('tab2');
        }

        function checkElementVisibility() {
            const areas = ['method1-content', 'method2-content', 'method3-content'];
            
            areas.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    const rect = element.getBoundingClientRect();
                    const computedStyle = window.getComputedStyle(element);
                    
                    console.log(`üëÅÔ∏è ${id}:`, {
                        exists: !!element,
                        visible: rect.width > 0 && rect.height > 0,
                        display: computedStyle.display,
                        visibility: computedStyle.visibility,
                        opacity: computedStyle.opacity,
                        position: computedStyle.position,
                        zIndex: computedStyle.zIndex
                    });
                }
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== FORCE VISIBLE TEST LOADED ===');
            
            // Check URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const urlTab = urlParams.get('tab');
            
            if (urlTab) {
                console.log(`URL parameter found: ${urlTab}`);
                forceShowContent(urlTab);
            } else {
                forceShowContent('tab1');
            }
            
            // Auto update status
            setInterval(updateStatus, 1000);
        });

        // Handle URL changes
        window.addEventListener('popstate', function(event) {
            const urlParams = new URLSearchParams(window.location.search);
            const urlTab = urlParams.get('tab') || 'tab1';
            console.log(`=== POPSTATE: ${urlTab} ===`);
            forceShowContent(urlTab);
        });
    </script>
</body>
</html>
